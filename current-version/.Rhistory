require(plyr)
install.packages('plyr')
library(RUnit)
install.package("RODBC")
package.install("RODBC")
install.package("RODBC", package="RODBC")
install.packages("RODBC", .Library, repos="http://cran.r-project.org")
install.packages("RODBC", repos="http://cran.r-project.org")
R."library(RODBC)"
library(RODBC)
install.packages("RODBC", repos="http://cran.r-project.org")
?install.packages
pwd
dir
?setSqlTypeInfo
install.packages("RODBC", repos="http://cran.r-project.org")
?setSqlTypeInfo
?install.packages
install.packages("RODBC", repos="http://cran.r-project.org", dependences=TRUE)
install.packages("RODBC", repos="http://cran.r-project.org", dependences=c("Depends", "Imports", "LinkingTo", "Suggests", "Enhances"))
install.packages("RODBC", repos="http://cran.r-project.org")
install.packages("RODBC", repos="http://cran.r-project.org")
install.packages("RODBC", repos="http://cran.r-project.org")
library(RODBC)
library(RODBC)
alunoDiscDF <- read.csv("provisorio/aluno-disciplina-periodo.csv")
sqlTables(alunoDiscDF)
alunoDiscDF <- odbcConnect("provisorio/aluno-disciplina-periodo.csv")
dns <- odbcConnect(localhost)
dns <- odbcConnect('127.0.0.0')
dns <- odbcConnect(127.0.0.0)
dns <- odbcConnect("127.0.0.0")
data(alunoDiscDF)
alunoDiscDF <- read.csv("provisorio/aluno-disciplina-periodo.csv")
data(alunoDiscDF)
data('alunoDiscDF')
library(RODBC)
alunoDiscDF <- read.csv("provisorio/aluno-disciplina-periodo.csv")
data(alunoDiscDF)
data(alunoDiscDF)
channel <- odbcConnect("alunoDiscDF")
channel <- odbcConnect("provisorio/aluno-disciplina-periodo.csv")
library(RODBC)
alunoDiscDF <- read.csv("provisorio/aluno-disciplina-periodo.csv")
library(RODBC)
channel <- odbcConnect("provisorio/aluno-disciplina-periodo.csv")
channel <- odbcConnectCSV("provisorio/aluno-disciplina-periodo.csv")
channel <- odbcConnect("aluno-disciplina-periodo.csv")
channel <- odbcConnect("provisorio/aluno-disciplina-periodo.csv")
library(RODBC)
cn <- odbcConnect("VerticaDSN")
res <- sqlQuery(cn, "select da.Periodo, da.CodigoDisciplina,  d.NomeDisciplina, de.NomeDepto, da.MatriculaAluno, da.Media from Disciplina d, DisciplinaAluno da, Departamento de where d.CodigoDisciplina = da.CodigoDisciplina and d.CodigoDepto = de.CodigoDepto")
sqlFetch(cn, "Situacao")
c <- sqlFetch(cn, "DisciplinaAluno")
close(cn)
library(RODBC)
cn <- odbcConnect("VerticaDSN")
?odbcConnect
cn <- odbcConnect("odbc.ini")
cn <- odbcDriverConnect("VerticaDSN")
cn <- odbcConnect("VerticaDSN")
cn <- odbcConnect(connection = "VerticaDSN")
library(RODBC)
cn <- odbcConnect("VerticaDSN")
res <- sqlQuery(cn, "select da.Periodo, da.CodigoDisciplina,  d.NomeDisciplina, de.NomeDepto, da.MatriculaAluno, da.Media from Disciplina d, DisciplinaAluno da, Departamento de where d.CodigoDisciplina = da.CodigoDisciplina and d.CodigoDepto = de.CodigoDepto")
sqlFetch(cn, "Situacao")
c <- sqlFetch(cn, "DisciplinaAluno")
close(cn)
View(c)
View(res)
View(c)
View(res)
View(c)
View(c)
notaDisciplDF = read.csv('data/arquivo_notas_disciplinas_periodo.csv')
library(RODBC)
cn <- odbcConnect("VerticaDSN")
setwd("ccc/ccc-analytics-2.0/src/R/")
library(RODBC)
cn <- odbcConnect("VerticaDSN")
setwd("ccc/ccc-analytics-2.0/")
cn <- odbcConnect("VerticaDSN")
notas.disciplinas = read.csv("data/historico-ccc.csv",stringsAsFactors=F)
info.disciplinas = read.csv("data/arquivo_informacao_das_disciplinas.csv",stringsAsFactors=F)
notas.disciplinas$SITUACAO[notas.disciplinas$SITUACAO == "Aprovado"] <- 0
notas.disciplinas$SITUACAO[notas.disciplinas$SITUACAO == "Reprovado" | notas.disciplinas$SITUACAO == "Reprovado por Falta"] <- 1
notas.disciplinas <- subset(notas.disciplinas, SITUACAO != "Trancado") #Removendo as disciplinas trancadas!
notas.disciplinas$SITUACAO = as.numeric(notas.disciplinas$SITUACAO)
resultado.absoluto = aggregate(SITUACAO ~ CODIGO, data = notas.disciplinas, sum)
resultado.relativo = aggregate(SITUACAO ~ CODIGO, data = notas.disciplinas, mean)
#Calculo por periodo
#resultado.absoluto = aggregate(SITUACAO ~ CODIGO + PERIODO, data = notas.disciplinas, sum)
#resultado.relativo = aggregate(SITUACAO ~ CODIGO + PERIODO, data = notas.disciplinas, mean)
resultado.absoluto = merge(info.disciplinas,resultado.absoluto, by=c("CODIGO"))
resultado.relativo = merge(info.disciplinas,resultado.relativo, by=c("CODIGO"))
resultado = cbind(resultado.absoluto, "RESULTADORELATIVO" = resultado.relativo$SITUACAO)
resultado = resultado[with(resultado, order(RESULTADORELATIVO)),]
cd ..
cd ..
setwd('/home/celio/Desenvolvimento/ccc/current-version')
notas.disciplinas = read.csv("data/historico-ccc.csv",stringsAsFactors=F)
info.disciplinas = read.csv("data/arquivo_informacao_das_disciplinas.csv",stringsAsFactors=F)
notas.disciplinas$SITUACAO[notas.disciplinas$SITUACAO == "Aprovado"] <- 0
notas.disciplinas$SITUACAO[notas.disciplinas$SITUACAO == "Reprovado" | notas.disciplinas$SITUACAO == "Reprovado por Falta"] <- 1
notas.disciplinas <- subset(notas.disciplinas, SITUACAO != "Trancado") #Removendo as disciplinas trancadas!
notas.disciplinas$SITUACAO = as.numeric(notas.disciplinas$SITUACAO)
resultado.absoluto = aggregate(SITUACAO ~ CODIGO, data = notas.disciplinas, sum)
resultado.relativo = aggregate(SITUACAO ~ CODIGO, data = notas.disciplinas, mean)
#Calculo por periodo
#resultado.absoluto = aggregate(SITUACAO ~ CODIGO + PERIODO, data = notas.disciplinas, sum)
#resultado.relativo = aggregate(SITUACAO ~ CODIGO + PERIODO, data = notas.disciplinas, mean)
resultado.absoluto = merge(info.disciplinas,resultado.absoluto, by=c("CODIGO"))
resultado.relativo = merge(info.disciplinas,resultado.relativo, by=c("CODIGO"))
resultado = cbind(resultado.absoluto, "RESULTADORELATIVO" = resultado.relativo$SITUACAO)
resultado = resultado[with(resultado, order(RESULTADORELATIVO)),]
View(resultado)
View(resultado)
notas.disciplinas = read.csv("data/historico-ccc.csv",stringsAsFactors=F)
info.disciplinas = read.csv("data/arquivo_informacao_das_disciplinas.csv",stringsAsFactors=F)
notas.disciplinas$SITUACAO[notas.disciplinas$SITUACAO == "Aprovado"] <- 0
notas.disciplinas$SITUACAO[notas.disciplinas$SITUACAO == "Reprovado" | notas.disciplinas$SITUACAO == "Reprovado por Falta"] <- 1
notas.disciplinas <- subset(notas.disciplinas, SITUACAO != "Trancado") #Removendo as disciplinas trancadas!
notas.disciplinas$SITUACAO = as.numeric(notas.disciplinas$SITUACAO)
View(notas.disciplinas)
resultado.absoluto = aggregate(SITUACAO ~ CODIGO, data = notas.disciplinas, sum)
View(resultado.absoluto)
resultado.relativo = aggregate(SITUACAO ~ CODIGO, data = notas.disciplinas, mean)
View(resultado.relativo)
library(RODBC)
cn <- odbcConnect("VerticaDSN")
info.disciplinas <- sqlQuery(cn, "select da.CodigoDisciplina, da.CodigoSituacao from DisciplinaAluno da", stringsAsFactors = FALSE)
info.disciplinas$Situacao[info.disciplinas$CodigoSituacao == 1] <- 0
info.disciplinas$Situacao[info.disciplinas$CodigoSituacao == 2 | info.disciplinas$CodigoSituacao == 3] <- 1
info.disciplinas <- subset(info.disciplinas, CodigoSituacao != 4) #Removendo as disciplinas trancadas!
info.disciplinas$Situacao = as.numeric(info.disciplinas$Situacao)
resultado.absoluto = aggregate(Situacao ~ CodigoDisciplina, data = info.disciplinas, sum)
resultado.relativo = aggregate(Situacao ~ CodigoDisciplina, data = info.disciplinas, mean)
View(info.disciplinas)
View(resultado.absoluto)
View(resultado.relativo)
total.disciplinas = aggregate(CodigoDisciplina, data = info.disciplinas, sum)
cn <- odbcConnect("VerticaDSN")
info.disciplinas <- sqlQuery(cn, "select da.CodigoDisciplina, da.CodigoSituacao from DisciplinaAluno da", stringsAsFactors = FALSE)
info.disciplinas$Situacao[info.disciplinas$CodigoSituacao == 1] <- 0
info.disciplinas$Situacao[info.disciplinas$CodigoSituacao == 2 | info.disciplinas$CodigoSituacao == 3] <- 1
info.disciplinas <- subset(info.disciplinas, CodigoSituacao != 4) #Removendo as disciplinas trancadas!
info.disciplinas$Situacao = as.numeric(info.disciplinas$Situacao)
total.disciplinas = aggregate(CodigoDisciplina, data = info.disciplinas, sum)
resultado.absoluto = aggregate(Situacao ~ CodigoDisciplina, data = info.disciplinas, sum)
resultado.relativo = aggregate(Situacao ~ CodigoDisciplina, data = info.disciplinas, mean)
sum
total.disciplinas = nrow(CodigoDisciplina)
total.disciplinas = nrow(info.disciplinas$CodigoDisciplina)
fix(total.disciplinas)
total.disciplinas = nrow(info.disciplinas$CodigoDisciplina)
total.disciplinas = nrow(info.disciplinas$CodigoDisciplina, data = info.disciplinas, sum)
total.disciplinas = nrow(info.disciplinas$CodigoDisciplina, sum)
total.disciplinas = nrow(info.disciplinas$CodigoDisciplina)
fix(total.disciplinas)
total.disciplinas = aggregate(info.disciplinas$CodigoDisciplina, data = info.disciplinas, sum)
total.disciplinas = aggregate(info.disciplinas$CodigoDisciplina, sum)
total.disciplinas = aggregate(info.disciplinas$CodigoDisciplina, data = info.disciplinas, sum)
total.disciplinas = aggregate(Situacao ~ CodigoDisciplina, data = info.disciplinas, sum)
View(total.disciplinas)
total.disciplinas = nrow(info.disciplinas$CodigoDisciplina)
fix(total.disciplinas)
infoAux <- info.disciplinas
info.disciplinas <- subset(info.disciplinas, CodigoSituacao != 4) #Removendo as disciplinas trancadas!
total.disciplinas = aggregate(Situacao ~ CodigoDisciplina, data = infoAux, mean)
View(total.disciplinas)
View(infoAux)
View(infoAux)
infoAux$Situacao
max(infoAux$Situacao)
infoAux$Situacao[infoAux$CodigoSituacao == 4] <- 0
library(RODBC)
cn <- odbcConnect("VerticaDSN")
info.disciplinas <- sqlQuery(cn, "select da.CodigoDisciplina, da.CodigoSituacao from DisciplinaAluno da", stringsAsFactors = FALSE)
info.disciplinas$Situacao[info.disciplinas$CodigoSituacao == 1] <- 0
info.disciplinas$Situacao[info.disciplinas$CodigoSituacao == 2 | info.disciplinas$CodigoSituacao == 3] <- 1
infoAux <- info.disciplinas
infoAux$Situacao[infoAux$CodigoSituacao == 4] <- 0
info.disciplinas <- subset(info.disciplinas, CodigoSituacao != 4) #Removendo as disciplinas trancadas!
infoAux$Situacao = as.numeric(info.disciplinas$Situacao)
info.disciplinas$Situacao = as.numeric(info.disciplinas$Situacao)
infoAux$Situacao = as.numeric(infoAux$Situacao)
info.disciplinas$Situacao = as.numeric(info.disciplinas$Situacao)
total.disciplinas = aggregate(Situacao ~ CodigoDisciplina, data = infoAux, mean)
View(total.disciplinas)
resultado.relativo = aggregate(Situacao ~ CodigoDisciplina, data = info.disciplinas, mean)
View(total.disciplinas)
View(infoAux)
View(resultado.relativo)
View(info.disciplinas)
View(total.disciplinas)
View(resultado.relativo)
View(total.disciplinas)
View(total.disciplinas)
total.disciplinas = aggregate(CodigoDisciplina, data = infoAux, nrow)
total.disciplinas = aggregate(infoAux$CodigoDisciplina, data = infoAux, nrow)
total.disciplinas = aggregate(Situacao ~ CodigoDisciplina, data = infoAux, nrow)
View(total.disciplinas)
cn <- odbcConnect("VerticaDSN")
info.disciplinas <- sqlQuery(cn, "select da.CodigoDisciplina, da.CodigoSituacao from DisciplinaAluno da", stringsAsFactors = FALSE)
info.disciplinas$Situacao[info.disciplinas$CodigoSituacao == 1] <- 0
info.disciplinas$Situacao[info.disciplinas$CodigoSituacao == 2 | info.disciplinas$CodigoSituacao == 3] <- 1
info.disciplinas <- subset(info.disciplinas, CodigoSituacao != 4) #Removendo as disciplinas trancadas!
info.disciplinas$Situacao = as.numeric(info.disciplinas$Situacao)
resultado.absoluto = aggregate(Situacao ~ CodigoDisciplina, data = info.disciplinas, sum)
resultado.relativo = aggregate(Situacao ~ CodigoDisciplina, data = info.disciplinas, mean)
info.disciplinas$CodigoSituacao
info.disciplinas$CodigoDisciplina
nrow(CodigoDisciplina)
nrow(info.disciplinas$CodigoDisciplina)
NROW(info.disciplinas$CodigoDisciplina)
totalAluno = aggregate(Situacao ~ CodigoDisciplina, data = info.disciplinas, NROW)
View(totalAluno)
View(resultado.absoluto)
teste <- resultado.absoluto$Situacao/totalAluno$Situacao
library(compare)
View(resultado.relativo)
compare(teste, resultado.relativo$Situacao, allowAll = T)
require(plyr)
info.disciplinas$CodigoSituacao = NULL
info.disciplinas$Situacao = NULL
info.disciplinas <- ddply(info.disciplinas, .(CodigoDisciplina), nrow)
info.disciplinas$V1 = NULL
resultado.absoluto = merge(info.disciplinas,resultado.absoluto, by=c("CodigoDisciplina"))
resultado.relativo = merge(info.disciplinas,resultado.relativo, by=c("CodigoDisciplina"))
resultado.absoluto <- rename(resultado.absoluto, replace = c("Situacao" = "ResultadoAbsoluto"))
resultado = cbind(resultado.absoluto, "ResultadoRelativo" = resultado.relativo$Situacao)
View(resultado)
total.alunos = aggregate(Situacao ~ CodigoDisciplina, data = info.disciplinas, NROW)
total.alunos = aggregate(Situacao ~ CodigoDisciplina, data = info.disciplinas, NROW)
library(RODBC)
cn <- odbcConnect("VerticaDSN")
info.disciplinas <- sqlQuery(cn, "select da.CodigoDisciplina, da.CodigoSituacao from DisciplinaAluno da", stringsAsFactors = FALSE)
info.disciplinas$Situacao[info.disciplinas$CodigoSituacao == 1] <- 0
info.disciplinas$Situacao[info.disciplinas$CodigoSituacao == 2 | info.disciplinas$CodigoSituacao == 3] <- 1
info.disciplinas <- subset(info.disciplinas, CodigoSituacao != 4) #Removendo as disciplinas trancadas!
info.disciplinas$Situacao = as.numeric(info.disciplinas$Situacao)
total.alunos = aggregate(Situacao ~ CodigoDisciplina, data = info.disciplinas, NROW)
resultado.absoluto = aggregate(Situacao ~ CodigoDisciplina, data = info.disciplinas, sum)
resultado.relativo = aggregate(Situacao ~ CodigoDisciplina, data = info.disciplinas, mean)
require(plyr)
info.disciplinas$CodigoSituacao = NULL
info.disciplinas$Situacao = NULL
info.disciplinas <- ddply(info.disciplinas, .(CodigoDisciplina), nrow)
info.disciplinas$V1 = NULL
resultado.absoluto = merge(info.disciplinas,resultado.absoluto, by=c("CodigoDisciplina"))
resultado.relativo = merge(info.disciplinas,resultado.relativo, by=c("CodigoDisciplina"))
resultado.absoluto <- rename(resultado.absoluto, replace = c("Situacao" = "ResultadoAbsoluto"))
resultado = cbind(resultado.absoluto, "ResultadoRelativo" = resultado.relativo$Situacao)
View(total.alunos)
resultado = cbind(resultado, "TotalAlunos" = total.alunos$Situacao)
View(resultado)
write.csv(resultado, "data/reprovacoes_por_disciplina_com_Total_de_Alunos.csv", row.names=F, fileEncoding = "UTF-8")
write.csv(resultado, "data/reprovacoes_por_disciplina_com_total_de_alunos.csv", row.names=F, fileEncoding = "UTF-8")
View(resultado.absoluto)
info.disciplinas <- sqlQuery(cn, "select da.CodigoDisciplina, da.CodigoSituacao from DisciplinaAluno da", stringsAsFactors = FALSE)
info.disciplinas$Situacao[info.disciplinas$CodigoSituacao == 1] <- 0
cn <- odbcConnect("VerticaDSN")
info.disciplinas <- sqlQuery(cn, "select da.CodigoDisciplina, da.CodigoSituacao from DisciplinaAluno da", stringsAsFactors = FALSE)
View(info.disciplinas)
t
library(RODBC)
cn <- odbcConnect("VerticaDSN")
info.disciplinas <- sqlQuery(cn, "select da.CodigoDisciplina, da.CodigoSituacao from DisciplinaAluno da", stringsAsFactors = FALSE)
info.disciplinas$Situacao[info.disciplinas$CodigoSituacao == 1] <- 0
info.disciplinas$Situacao[info.disciplinas$CodigoSituacao == 2 | info.disciplinas$CodigoSituacao == 3] <- 1
info.disciplinas <- subset(info.disciplinas, CodigoSituacao != 4) #Removendo as disciplinas trancadas!
info.disciplinas$Situacao = as.numeric(info.disciplinas$Situacao)
total.alunos = aggregate(Situacao ~ CodigoDisciplina, data = info.disciplinas, NROW)
resultado.absoluto = aggregate(Situacao ~ CodigoDisciplina, data = info.disciplinas, sum)
resultado.relativo = aggregate(Situacao ~ CodigoDisciplina, data = info.disciplinas, mean)
require(plyr)
info.disciplinas$CodigoSituacao = NULL
info.disciplinas$Situacao = NULL
info.disciplinas <- ddply(info.disciplinas, .(CodigoDisciplina), nrow)
info.disciplinas$V1 = NULL
resultado.absoluto = merge(info.disciplinas,resultado.absoluto, by=c("CodigoDisciplina"))
resultado.relativo = merge(info.disciplinas,resultado.relativo, by=c("CodigoDisciplina"))
resultado.absoluto <- rename(resultado.absoluto, replace = c("Situacao" = "ResultadoAbsoluto"))
resultado = cbind(resultado.absoluto, "ResultadoRelativo" = resultado.relativo$Situacao)
resultado = cbind(resultado, "TotalAlunos" = total.alunos$Situacao)
write.csv(resultado, "data/reprovacoes_por_disciplina_com_total_de_alunos.csv", row.names=F, fileEncoding = "UTF-8")
